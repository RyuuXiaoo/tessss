<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>RyuuXiao API Docs</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="container">
    <h1>üìò RyuuXiao API Documentation</h1>
    <nav class="row">
      <a href="index.html" class="pill">‚Üê Kembali ke Store</a>
      <a href="admin.html" class="pill">Admin</a>
    </nav>
  </header>
  <main class="container">
    <div class="card">
      <h2>Pengenalan</h2>
      <p>API ini memungkinkan partner atau reseller untuk melakukan order otomatis.</p>
      <p><strong>Base URL:</strong> <code>/api/</code> (gunakan domain/server kamu)</p>
      <p>Semua endpoint memerlukan <code>apikey</code> (query atau header) dengan nilai: <code>RyuuXiao</code>.</p>
    </div>

    <div class="card">
      <h2>Auth</h2>
      <ul>
        <li>Publik: <code>?apikey=RyuuXiao</code> atau header <code>x-api-key: RyuuXiao</code></li>
        <li>Admin: header <code>x-admin-key: &lt;ADMIN_KEY&gt;</code></li>
      </ul>
    </div>

    <div class="card">
      <h2>GET /api/products</h2>
      <p>List produk dan stok tersedia.</p>
<pre class="mono">curl -s "https://yourdomain.com/api/products?apikey=RyuuXiao"</pre>
<pre class="mono">Response:
{
  "status": true,
  "products": [
    {"id":"netflix","name":"Netflix 1 Bulan","price":30000,"stok":10,"category":"Streaming"}
  ]
}</pre>
    </div>

    <div class="card">
      <h2>POST /api/order</h2>
      <p>Buat pesanan. Jika <code>pay_now=true</code>, server akan membuat sesi QRIS dan mengembalikan gambar QR untuk dibayar.</p>
<pre class="mono">curl -s -X POST "https://yourdomain.com/api/order?apikey=RyuuXiao" \
  -H "Content-Type: application/json" \
  -d '{
    "product_id":"netflix",
    "qty":1,
    "pay_now": true
  }'</pre>
<pre class="mono">Response (pending pembayaran):
{
  "status": true,
  "message": "Order dibuat",
  "trx_id": "TRX-8F2A1C",
  "total": 30900,
  "qris": {
    "amount": 30900,
    "image_url": "https://.../qris.png",
    "expires_at": 1730380000000
  }
}</pre>
<pre class="mono">Response (jika paid=true di body untuk testing):
{
  "status": true,
  "message": "Order berhasil & dikirim",
  "trx_id": "TRX-2B7D0A",
  "details": {
    "produk": "Netflix 1 Bulan",
    "items": [ { "email":"...", "password":"..." } ]
  }
}</pre>
    </div>

    <div class="card">
      <h2>GET /api/status</h2>
      <p>Cek status order.</p>
<pre class="mono">curl -s "https://yourdomain.com/api/status?apikey=RyuuXiao&trx_id=TRX-8F2A1C"</pre>
<pre class="mono">Response:
{
  "status": true,
  "trx_id": "TRX-8F2A1C",
  "paid": true,
  "delivered": true,
  "items": [ { "email":"...", "password":"..." } ]
}</pre>
    </div>

    <div class="card">
      <h2>Admin Endpoints</h2>
      <ul>
        <li>POST <code>/api/admin/product</code> ‚Äî tambah/update produk</li>
        <li>POST <code>/api/admin/stock/add</code> ‚Äî tambah stok</li>
        <li>POST <code>/api/admin/stock/clear</code> ‚Äî kosongkan stok</li>
      </ul>
<pre class="mono">curl -s -X POST "https://yourdomain.com/api/admin/stock/add" \
  -H "x-admin-key: YOUR_ADMIN_KEY" -H "Content-Type: application/json" \
  -d '{"product_id":"netflix","lines":["email|pass|profil|-|2fa|30000"]}'</pre>
    </div>
  </main>
  <footer>¬© 2025 RyuuXiao API</footer>
</body>
</html>
